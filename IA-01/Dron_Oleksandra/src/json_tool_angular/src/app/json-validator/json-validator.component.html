<div class="row" style="height: 70%;">

  <div class="col-6 h-100" style="height:100%">
    <textarea [(ngModel)]="data" style="max-height:100%;min-height:100%" class="w-100 p-3"></textarea>
    <mat-error class="alert">{{getError()}}</mat-error>
    <mat-error class="alert">{{getValidationError()}}</mat-error>
    <br>
    <button class="btn btn-warning m-2" (click)="prettifyData()">Prettify</button>
    <button class="btn btn-warning m-2" (click)="generateSchema()">Generate schema</button>
    <button class="btn btn-warning m-2" [cdkCopyToClipboard]="data">Copy</button>
  </div>

  <div class="col-6 h-100 border" style="height:100%">
    <pre style="max-height:100%;min-height:100%" class="p-3" [highlight]="prettifyJson(this.isJsonMode)"
         [languages]="['json']">
    </pre>
    <mat-radio-group (change)="changeMod($event)" aria-label="Select an option" class="bg-warning p-2 m-1 rounded-2">
      <mat-radio-button [checked]="isJsonMode" [value]="true">JSON</mat-radio-button>
      <mat-radio-button [checked]="!isJsonMode" [value]="false">Flatten</mat-radio-button>
    </mat-radio-group>
    <button class="btn btn-warning m-1" [cdkCopyToClipboard]="prettifyJson(this.isJsonMode)">Copy</button>
    <button class="btn btn-warning m-1" (click)="generateExample()">Example</button>
    <button class="btn btn-warning m-1" (click)="exportAsMD()">Export as MD</button>
    <button class="btn btn-warning m-1" (click)="saveSchema()">Save</button>
    <button class="btn btn-warning m-1 p-1" (click)="findPrev()">
      <mat-icon>undo</mat-icon>
    </button>
    <button class="btn btn-warning m-1 p-1" (click)="findNext()">
      <mat-icon>redo</mat-icon>
    </button>
  </div>

</div>

<br>
<br>
<br>

<div class="container m-5" id="main-window">
<mat-table #table [dataSource]="schemas" class="table">

  <ng-container matColumnDef="title" class="mat-button-toggle">
    <mat-header-cell *matHeaderCellDef>Title</mat-header-cell>
    <mat-cell *matCellDef="let schema">
      <div [matTooltip]="schema.title">{{schema.title}}</div>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="description" class="mat-button-toggle">
    <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
    <mat-cell *matCellDef="let schema">
      <div [matTooltip]="schema.description">{{schema.description}}</div>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="createdDate" class="mat-button-toggle">
    <mat-header-cell *matHeaderCellDef>Created date</mat-header-cell>
    <mat-cell *matCellDef="let schema">
      <div [matTooltip]="schema.createdDate">{{schema.createdDate | date:'short'}}</div>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns;"
           [ngClass]="{hoverOverlay: row.hovered, ripple: true}"
           (click)="schema = row.json" (mouseover)="row.hovered = true"
           (mouseout)="row.hovered = false"></mat-row>

</mat-table>

</div>

